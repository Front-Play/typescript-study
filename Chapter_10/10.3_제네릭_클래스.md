# ì±•í„° 10.3 ì œë„¤ë¦­ í´ë˜ìŠ¤

## ëª©í‘œ

- í´ë˜ìŠ¤ì—ì„œ ì œë„¤ë¦­ ì‚¬ìš©ë²•ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤.
- ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
- ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ í†µí•´ ì œë„¤ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

<br/>

## ì œë„¤ë¦­ í´ë˜ìŠ¤ì˜ íŠ¹ì§•

- ì„ì˜ì˜ íƒ€ì…ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.
- ì œë„¤ë¦­ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œëŠ” ì´ì— ìƒì‘í•˜ëŠ” íƒ€ì…ì¸ìˆ˜ë¥¼ ì œê³µí•´ì•¼í•œë‹¤.
  - ì¸í„°í˜ì´ìŠ¤ì˜ ì œë„¤ë¦­ê³¼ ë™ì¼
- í´ë˜ìŠ¤ì˜ ê° ì¸ìŠ¤í„´ìŠ¤ ë³„ë¡œ ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì¸ìˆ˜ ì§‘í•©ì„ ê°€ì§„ë‹¤.

> ğŸ’¡ ì œë„¤ë¦­ ë•ì— íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê°™ì€ í´ë˜ìŠ¤ë¡œ ì‘ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë“¤ë„ ì„œë¡œ ë‹¤ë¥¸ íƒ€ì… êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤!

```ts
class Secret<Key, Value> {
  key: Key;
  value: Value;

  constructor(key: Key, value: Value) {
    this.key = key;
    this.value = value;
  }

  getValue(key: Key): Value|undefined {
    return this.key === key ? this.value : undefined;
  }
};

const storage = new Secret(12345, "luggage"); // íƒ€ì…: Secret<number, string>
const agentCode = new Secret("start", 54321); // íƒ€ì…: Secret<string, number>

storage.getValue(67890); // íƒ€ì…: string|undefined
agentCode.getValue("start"); // íƒ€ì…: number|undefined
```

ê·¸ë¦¬ê³  ìœ„ ì½”ë“œë¥¼ ë³´ë©´ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©° ìœ ì¶”ëœ íƒ€ì…ì´ ë©”ì†Œë“œì˜ ë§¤ê°œë³€ìˆ˜ì™€ë„ ì—°ê´€ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ ìœ ì¶”ëœ íƒ€ì…ê³¼ ë‹¤ë¥¸ íƒ€ì…ì„ ë©”ì†Œë“œì˜ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ê³  í•˜ë©´ ì—ëŸ¬ë¥¼ ë„ìš´ë‹¤.

```ts
agentCode.getValue(12345);
//                 ~~~~~
// Error: Argument of type 'number' is not assignable to parameter of type 'string'.
```

<br/>

## ëª…ì‹œì  ì œë„¤ë¦­ í´ë˜ìŠ¤ íƒ€ì…

ìœ„ì²˜ëŸ¼ ìƒì„±ìì— ì „ë‹¬ëœ ë§¤ê°œë³€ìˆ˜ë¡œë¶€í„° íƒ€ì…ì¸ìˆ˜ë¥¼ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤ë©´ ìœ ì¶”ëœ íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤.

í•˜ì§€ë§Œ ì „ë‹¬ëœ ì¸ìˆ˜ì—ì„œ ìœ ì¶”í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ê°’ì€ ì•ì„  ê²ƒë“¤ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `unknown`ì´ ëœë‹¤.

### ì˜ˆì‹œ ìƒí™©

0. ì‚¬ìš©í•  í´ë˜ìŠ¤ ì‘ì„±

```ts
class CurriedCallback<Input> {
  #callback: (input: Input) => void;  // #callback ì„ ì–¸

  constructor(callback: (input: Input) => void) {
    this.#callback = (input: Input) => {  // #callback í• ë‹¹
      console.log("Input: ", input);
      callback(input);
    };
  }

  call(input: Input) {
    this.#callback(input);  // #callback ì‚¬ìš©
  }
}
```

1. ë¬¸ì œì—†ì´ ì‘ë™ë˜ëŠ” ê²½ìš°: íƒ€ì…ì¸ìˆ˜ ì •ë³´ê°€ ì œê³µë¨

```ts
// íƒ€ì…: CurriedCallback<string>
new CurriedCallback((input:string) => {
  console.log(input.length);
});
```

2. ë¬¸ì œìƒí™©: ìœ ì¶”í•  ì •ë³´ê°€ ì—†ìŒ

```ts
// íƒ€ì…: CurriedCallback<unknown>
new CurriedCallback((input) => {
  console.log(input.length);
  //                ~~~~~~
  // Error: Property 'length' does not exist on type 'unknown'.
});
```

ìœ„ ê°™ì´ unknownì´ ë˜ëŠ” ê²ƒì„ í”¼í•˜ê³ ì ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¸í„°í˜ì´ìŠ¤ì—ì„œì™€ ë§ˆì°¬ê°€ì§€ë¡œ `ëª…ì‹œì  íƒ€ì…ì¸ìˆ˜ ì œê³µ` ë°©ë²•ì´ë‹¤.

### í•´ê²° ë°©ë²•

```ts
// íƒ€ì…: CurriedCallback<string>
new CurriedCallback<string>((input) => {
  console.log(input.length);
});

// ëª…ì‹œì  ì„ ì–¸ê³¼ ì¼ì¹˜í•˜ì§€ ì•Šì„ ê²½ìš° ì—ëŸ¬
new CurriedCallback<string>((input: boolean) => {
  //                         ~~~~~~~~~~~~~~~~~~~~~
  // Argument of type '(input: boolean) => void' is not assignable to parameter of type '(input: string) => void'.
  //  Types of parameters 'input' and 'input' are incompatible.
  //    Type 'string' is not assignable to type 'boolean'.
});
```

<br/>

## ì œë„¤ë¦­ í´ë˜ìŠ¤ í™•ì¥

ì œë„¤ë¦­ í´ë˜ìŠ¤ë„ `extends` í‚¤ì›Œë“œ ë’¤ì— ê¸°ë³¸ í´ë˜ìŠ¤ë¡œ ì‚¬ìš©í•˜ì—¬ í™•ì¥ ë‹¨ê³„ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

**ğŸš¨ ì´ë•Œ ê¸°ë³¸ê°’ì´ ì—†ëŠ” íƒ€ì…ì¸ìˆ˜ì˜ ê²½ìš° [`ëª…ì‹œì  íƒ€ì… ì• ë„ˆí…Œì´ì…˜`](#ëª…ì‹œì -ì œë„¤ë¦­-í´ë˜ìŠ¤-íƒ€ì…)ì„ ì‚¬ìš©í•´ ì§€ì •í•´ì¤˜ì•¼í•œë‹¤.**

### ì˜ˆì‹œ ìƒí™©

```ts
class Quote<T> {
  lines: T;
  
  constructor(lines: T) {
    this.lines = lines;
  }
}
```

ìœ„ì—ì„œ ì‘ì„±ëœ `Quote<T>`ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ê¸°ë³¸ í´ë˜ìŠ¤ë¡œ ì‚¬ìš©í•˜ê³ ì í•œë‹¤.  
_ì´ë•Œ Quote í´ë˜ìŠ¤ì˜ íƒ€ì…ì¸ìˆ˜ì— ê¸°ë³¸ê°’ì´ ì—†ìœ¼ë¯€ë¡œ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ ì¤˜ì•¼í•œë‹¤._

```ts
class SpokenQuote extends Quote<string[]> {
  speak() {
    console.log(this.lines.join("\n"));
  }
}
```

ìœ„ë¥¼ ë³´ë©´ `SpokenQuote`ê°€ `Quote`ë¥¼ í™•ì¥í•˜ë©´ì„œ Quoteì— `string[]`ë¼ëŠ” íƒ€ì…ì¸ìˆ˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì£¼ì—ˆë‹¤.

ë•Œë¬¸ì— ì§€ì •ëœ ê²ƒê³¼ ë‹¤ë¥¸ íƒ€ì…ì€ ì‚¬ìš© ë¶ˆê°€í•˜ë‹¤.

```ts
new SpokenQuote(['a', 'b', 'c', 'd'])

new SpokenQuote(123)  // Error!
new SpokenQuote([1, 2, 3, 4, 5])  // Error!
```

![ì˜ˆì‹œ](https://user-images.githubusercontent.com/96231175/226163431-1eb3070e-13b8-4ca5-9458-2c1f9731f93c.jpg)

### ì œë„¤ë¦­ íŒŒìƒ í´ë˜ìŠ¤

```ts
class AttributedQuote<Value> extends Quote<Value> {
  speaker: string

  constructor(value: Value, speaker: string) {  // valueë¥¼ í†µí•´ íƒ€ì…ì¸ìˆ˜ ìœ ì¶”
    super(value); // Quote í´ë˜ìŠ¤ë¡œ íƒ€ì…ì¸ìˆ˜ ì „ë‹¬
    this.speaker = speaker;
  }
}
```

ìœ„ë¥¼ ë³´ë©´ `AttributedQuote`ë¼ëŠ” ì œë„¤ë¦­ í´ë˜ìŠ¤ê°€ `Quote`ë¼ëŠ” ë˜ ë‹¤ë¥¸ ì œë„¤ë¦­ í´ë˜ìŠ¤ë¡œë¶€í„° íŒŒìƒë˜ì—ˆë‹¤.

ì´ ê²½ìš°ì—” ê¸°ë³¸ í´ë˜ìŠ¤ì— ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ì§€ ì•Šê³ ë„, ìì²´ íƒ€ì…ì¸ìˆ˜ë¥¼ ìœ„ì²˜ëŸ¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

```ts
// AttributedQuote<string>
// â†’ Quote<string> í™•ì¥
new AttributedQuote("Hello World", "Tomas");
```

<br/>

## ì œë„¤ë¦­ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

1. ëª¨ë“  í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì œê³µí•˜ì—¬ ì œë„¤ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.
2. **ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤**ì˜ ëª¨ë“  íƒ€ì… ë§¤ê°œë³€ìˆ˜ëŠ” **í´ë˜ìŠ¤**ì—ì„œ ì„ ì–¸ë˜ì–´ì•¼ í•˜ë©°, ê° ê´€ê³„ê°„ íƒ€ì…ì€ ì¼ì¹˜ë˜ì–´ì•¼ í•œë‹¤.

>ì œë„¤ë¦­ ê¸°ë³¸ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬

```ts
interface ActingCredit<Role> {  // íƒ€ì… ë§¤ê°œë³€ìˆ˜ ì¡´ì¬
  role: Role;
}

class MoviePart implements ActingCredit<string> { // íƒ€ì…ì¸ìˆ˜ stringìœ¼ë¡œ ì§€ì •  
  role: string; // ì¸í„°í˜ì´ìŠ¤ì™€ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•´ ë§ˆì°¬ê°€ì§€ë¡œ string
  speaking: boolean;

  constructor(role: string, speaking: boolean) {
    this.role = role;
    this.speaking = speaking;
  }
}
```

ìœ„ì—ì„œ ë³´ë©´ í´ë˜ìŠ¤ `MoviePart`ê°€ `ActingCredit`ì´ë€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.

ì´ë•Œ í´ë˜ìŠ¤ì—ì„œ **1)** _ì¸í„°í˜ì´ìŠ¤ì˜ í•„ìš”í•œ `role`ì´ë€ ë³€ìˆ˜ê°€ ì œê³µë˜ì–´ ìˆê³ ,_ **2)** _ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤ì˜ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ íƒ€ì…ì¸ìˆ˜ë¥¼ ì œê³µí•˜ê³  ì´ë¥¼ í´ë˜ìŠ¤ ì•ˆì—ì„œë„ ì¼ì¹˜ ì‹œì¼°ë‹¤(`role: string`)._

ë§Œì•½ ì´ë¥¼ ì´ëŸ¬í•œ íƒ€ì…ì¸ìˆ˜ê°„ì˜ ê´€ê³„ê°€ ë§ì§€ ì•Šìœ¼ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

```ts
class IncorrectExtension implements ActingCredit<string> {
  role: boolean;
  //    ~~~~~~~
  // Property 'role' in type 'IncorrectExtension' is not assignable to the same property in base type 'ActingCredit<string>'.
  //  Type 'boolean' is not assignable to type 'string'.
}
```

<br/>

## ë©”ì„œë“œ ì œë„¤ë¦­

í´ë˜ìŠ¤ì˜ ë©”ì„œë“œëŠ” **í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì™€ ë³„ê°œë¡œ** `ìì²´ ì œë„¤ë¦­ íƒ€ì…`ì„ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.

```ts
class CreatePairFactory<Key> {
  key: Key;

  constructor(key: Key) {
    this.key = key;
  }

  createPair<Value>(value: Value) { // í´ë˜ìŠ¤ì™€ ë³„ê°œë¡œ Value ì œë„¤ë¦­ íƒ€ì… ì„ ì–¸
    return {key: this.key, value};
  }
}
```

ë•Œë¬¸ì— ë©”ì„œë“œì˜ ê°ê°ì˜ í˜¸ì¶œì€ ì„œë¡œ ë‹¤ë¥¸ íƒ€ì… ì¸ìˆ˜ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

```ts
const factory = new CreatePairFactory("role");

// íƒ€ì…: {key: string, value: number}
const numberPair = factory.createPair(123);

// íƒ€ì…: {key: string, value: string}
const stringPair = factory.createPair("Tom");
```

<br/>

## ì •ì  í´ë˜ìŠ¤ ì œë„¤ë¦­

### íŠ¹ì§•

-  í´ë˜ìŠ¤ì˜ `ì •ì (static) ë©¤ë²„`ëŠ” **ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì™€ êµ¬ë³„**ë˜ì–´ì§„ë‹¤.
-  í´ë˜ìŠ¤ì˜ íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì™€ ì—°ê²°ë˜ì§€ ì•ŠëŠ”ë‹¤.
  - `ì •ì  í´ë˜ìŠ¤ ë©”ì„œë“œ`ëŠ” ìì²´ íƒ€ì…ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ëŠ” ìˆìœ¼ë‚˜, í´ë˜ìŠ¤ì— ì„ ì–¸ëœ ë‹¤ë¥¸ íƒ€ì…ë§¤ê°œë³€ìˆ˜ì—ëŠ” ì ‘ê·¼ ë¶ˆê°€

### ì ‘ê·¼ ë¶ˆê°€ ì˜ˆì‹œ

```ts
class Outter<OnInstance> {
  instanceLog(value: OnInstance) {
    console.log(value);
  }

  // ìì²´ì ìœ¼ë¡œ OnStatic íƒ€ì…ë§¤ê°œë³€ìˆ˜ ì„ ì–¸
  static staticLog<OnStatic>(value: OnStatic) {
    let fromInstance: OnInstance;
    //                ~~~~~~~~~~
    // Static members cannot reference class type parameters.
  }
}
```

<br/>
<br/>

## Reference

- [ëŸ¬ë‹ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸](https://product.kyobobook.co.kr/detail/S000200553845) p. 207 - 213